<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixels Dojo Wiki - Master Pixels Online</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/chat-widget.css">
</head>
<body>
    <%- include('partials/header') %>

    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/category/startup">Start Here</a></li>
        <li><a href="/category/earn">Earn $PIXEL</a></li>
        <li><a href="/category/mastery">Mastery</a></li>
        <li><a href="/npcs-map">NPCs & Map</a></li>
        <li><a href="/events">Events</a></li>
        <li><a href="/amas">AMAs</a></li>
        <li><a href="/category/community">Community</a></li>
      </ul>
    </nav>

    <div class="main-wrapper">

      <!-- Sidebar -->
      <aside class="sidebar">
        <h4>Library</h4>
        <a href="/all-posts">ğŸ“š All Articles</a>
        <a href="/npcs-map">ğŸ—ºï¸ NPCs & Map</a>
        <a href="/events">âš¡ Events</a>
        <a href="/amas">ğŸ’¬ AMAs</a>
        <hr>
        <h5>Categories</h5>
        <a href="/category/startup">Start Here</a>
        <a href="/category/earn">Earn $PIXEL</a>
        <a href="/category/mastery">Mastery</a>
        <a href="/category/community">Community</a>
        <hr>
        <a href="https://forms.gle/Ea4doC8FbfnJ7DGv8" target="_blank" rel="noopener noreferrer"
           style="display:block; margin-top:0.5rem; padding:0.7rem 1rem; background:linear-gradient(135deg,#edff84,#ffd700); color:#000; font-weight:bold; text-decoration:none; border-radius:8px; text-align:center; transition:all 0.2s;"
           onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
          ğŸ’¡ Suggest a Topic
        </a>
        <div class="sidebar-logo">
          <img src="/images/pixeldojo_logo_portrait.png" alt="Pixels Dojo Logo" class="sidebar-logo-img">
        </div>
      </aside>

      <div class="main-content-area">
        
        <!-- Hero Section - SMALLER -->
        <section class="hero-full" id="top">
          <div class="hero-bg">
            <img 
              src="/images/banner with pixels dojo in white.png" 
              alt="Pixels Dojo Banner" 
              class="hero-bg-image"
              onerror="this.src='/images/defaults/default1.jpg';" 
              loading="lazy"
            >
            <div class="hero-overlay"></div>
          </div>

          <div class="hero-content">
            <h1 class="hero-title">PIXELS DOJO</h1>
            <p class="hero-tagline">Master TerraVilla â€¢ Earn $PIXEL â€¢ Join the Community</p>

            <div class="main-buttons">
              <a href="/category/startup" class="main-button">
                <div class="icon">ğŸŒ±</div>
                <h3>Start Here</h3>
                <p>Beginner guides & first steps</p>
              </a>

              <a href="/category/earn" class="main-button">
                <div class="icon">ğŸ’°</div>
                <h3>Earn $PIXEL</h3>
                <p>Strategies & mechanisms</p>
              </a>

              <a href="/category/mastery" class="main-button">
                <div class="icon">ğŸ‘‘</div>
                <h3>Mastery</h3>
                <p>VIP â€¢ NFTs â€¢ Advanced</p>
              </a>
            </div>
          </div>
        </section>

        <!-- Search Bar -->
        <div class="search-bar-container">
          <form action="/search" method="GET" class="search-form">
            <input type="text" name="q" placeholder="Search the wiki..." required>
            <button type="submit" class="btn btn-cyan">Search</button>
          </form>
        </div>

        <!-- Category Grid -->
        <section class="category-grid">
          
          <!-- Start Here -->
          <div class="category-block">
            <h2>ğŸŒ± Start Here</h2>
            <p><strong>New to Pixels?</strong> Learn the basics of TerraVilla, meet the NPCs, and get your first $PIXEL!</p>
            <ul>
              <li>ğŸ—ºï¸ Navigate TerraVilla</li>
              <li>ğŸ‘¥ Meet the NPCs</li>
              <li>ğŸŒ¾ Start farming</li>
              <li>âš¡ Your first quest</li>
            </ul>
            <a href="/category/startup" class="btn btn-outline">View Guides â†’</a>
          </div>

          <!-- Earn $PIXEL -->
          <div class="category-block">
            <h2>ğŸ’° Earn $PIXEL</h2>
            <p><strong>Make money playing!</strong> Discover all the ways to earn $PIXEL tokens in the game.</p>
            <ul>
              <li>ğŸŒ¾ Farming strategies</li>
              <li>ğŸ® Arcade competitions</li>
              <li>ğŸ“¦ Shipping contracts</li>
              <li>ğŸ† Hearth Hall rewards</li>
            </ul>
            <a href="/category/earn" class="btn btn-outline">View Strategies â†’</a>
          </div>

          <!-- Mastery -->
          <div class="category-block">
            <h2>ğŸ‘‘ Mastery</h2>
            <p><strong>Level up your game!</strong> Advanced tactics, VIP perks, NFT lands, and pro strategies.</p>
            <ul>
              <li>ğŸ’ VIP membership</li>
              <li>ğŸï¸ NFT lands</li>
              <li>ğŸ¨ UGC creation</li>
              <li>ğŸ“ˆ Advanced farming</li>
            </ul>
            <a href="/category/mastery" class="btn btn-outline">View Advanced â†’</a>
          </div>

          <!-- Recent Guides -->
          <div class="category-block recent wide-block">
            <h2>ğŸ“š Recent Guides</h2>
            <div class="recent-grid">
              <% if (recentPages && recentPages.length > 0) { %>
                <% recentPages.slice(0, 16).forEach(page => { %>
                  <a href="/pages/<%= page.slug %>" class="recent-card">
                    <% 
                      let thumbnail = '/images/placeholder.jpg';
                      try {
                        const shots = JSON.parse(page.screenshots || '[]');
                        if (shots.length > 0) thumbnail = shots[0];
                      } catch (e) {}
                    %>
                    <div class="card-image">
                      <img 
                        src="<%= thumbnail %>" 
                        alt="<%= page.title %>" 
                        loading="lazy"
                        onerror="this.src='/images/placeholder.jpg'"
                      >
                    </div>
                    <div class="card-content">
                      <h3><%= page.title %></h3>
                      <p class="snippet">
                        <%= (page.summary || page.content.substring(0, 150) + '...') %>
                      </p>
                      <small>By <%= page.author_display_name || 'Community' %></small>
                    </div>
                  </a>
                <% }) %>
              <% } else { %>
                <p class="no-content">No guides yet - be the first to contribute!</p>
              <% } %>
            </div>
            <a href="/all-posts" class="btn btn-outline">View All Guides â†’</a>
          </div>
        </section>

        <!-- Most Upvoted - COMPACT VERSION -->
        <section class="featured-compact">
          <h2>â­ Most Upvoted Guide</h2>
          <% if (mostUpvoted) { %>
            <% 
              let upvotedThumb = '/images/placeholder.jpg';
              try {
                if (mostUpvoted.screenshots) {
                  const shots = typeof mostUpvoted.screenshots === 'string' 
                    ? JSON.parse(mostUpvoted.screenshots) 
                    : mostUpvoted.screenshots;
                  if (shots && shots.length > 0) upvotedThumb = shots[0];
                }
              } catch (e) {}
            %>
            <a href="/pages/<%= mostUpvoted.slug %>" class="compact-card">
              <img src="<%= upvotedThumb %>" alt="<%= mostUpvoted.title %>" class="compact-thumb" onerror="this.src='/images/placeholder.jpg'">
              <div class="compact-info">
                <h3><%= mostUpvoted.title %></h3>
                <p class="compact-meta">
                  â­ <%= mostUpvoted.upvotes || 0 %> upvotes â€¢ 
                  <%= new Date(mostUpvoted.created_at).toLocaleDateString() %>
                </p>
              </div>
            </a>
          <% } else { %>
            <p class="no-content">No guides yet - start creating content!</p>
          <% } %>
        </section>

        <!-- Most Viewed - COMPACT VERSION -->
        <section class="featured-compact">
          <h2>ğŸ”¥ Most Viewed Guide</h2>
          <% if (mostViewed) { %>
            <% 
              let viewedThumb = '/images/placeholder.jpg';
              try {
                if (mostViewed.screenshots) {
                  const shots = typeof mostViewed.screenshots === 'string' 
                    ? JSON.parse(mostViewed.screenshots) 
                    : mostViewed.screenshots;
                  if (shots && shots.length > 0) viewedThumb = shots[0];
                }
              } catch (e) {}
            %>
            <a href="/pages/<%= mostViewed.slug %>" class="compact-card">
              <img src="<%= viewedThumb %>" alt="<%= mostViewed.title %>" class="compact-thumb" onerror="this.src='/images/placeholder.jpg'">
              <div class="compact-info">
                <h3><%= mostViewed.title %></h3>
                <p class="compact-meta">
                  ğŸ‘ï¸ <%= mostViewed.views || 0 %> views â€¢ 
                  <%= new Date(mostViewed.created_at).toLocaleDateString() %>
                </p>
              </div>
            </a>
          <% } else { %>
            <p class="no-content">No guides yet - your article could be first!</p>
          <% } %>
        </section>

        <!-- Quick Access - 6 BLOCKS (3x2 grid) -->
        <section class="content-section quick-access">
          <h2>âš¡ Quick Access</h2>
          <div class="quick-grid">
            
            <a href="/events" class="quick-block">
              <h3>âš¡ Active Events</h3>
              <p>Limited-time competitions & quests</p>
            </a>
            
            <a href="/npcs-map" class="quick-block">
              <h3>ğŸ—ºï¸ TerraVilla Map</h3>
              <p>Complete location guide & NPCs</p>
            </a>
            
            <a href="/amas" class="quick-block">
              <h3>ğŸ’¬ Weekly AMAs</h3>
              <p>Developer Q&As & updates</p>
            </a>
            
            <a href="/category/community" class="quick-block">
              <h3>ğŸ‘¥ Community</h3>
              <p>Discord, socials & resources</p>
            </a>

            <a href="https://forms.gle/6dzJP8v5JYzvgmV99" target="_blank" rel="noopener noreferrer" class="quick-block contributor-block">
              <h3>âœï¸ Become a Contributor</h3>
              <p>Share your knowledge â€¢ Earn recognition</p>
            </a>

            <a href="#" class="quick-block merch-block">
              <h3>ğŸ›ï¸ Pixels Dojo Merch</h3>
              <p>Gear up in style â€¢ Coming soon!</p>
            </a>

          </div>
        </section>

        <%- include('partials/footer') %>
      </div>
    </div>

    <script src="/js/chat-widget.js"></script>
    <script src="/js/main.js"></script>
    <%- include('partials/back-to-top') %>
</body>
</html>
