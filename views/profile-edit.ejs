<!DOCTYPE html>
<html lang="en">
<head>
  <title>Edit Profile - Pixels Dojo</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <%- include('partials/header') %>

  <div class="container" style="max-width: 600px; margin: 3rem auto;">
    <h1>Edit Profile</h1>

    <% if (error) { %>
      <div class="alert alert-error"><%= error %></div>
    <% } %>

    <form action="/profile/edit" method="POST" enctype="multipart/form-data">
      <div class="mb-3">
        <label for="display_name" class="form-label">Display Name</label>
        <input type="text" class="form-control" id="display_name" name="display_name" value="<%= user.display_name || '' %>">
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" class="form-control" id="email" name="email" value="<%= user.email || '' %>">
      </div>

      <div class="mb-3">
        <label for="profile_image" class="form-label">Profile Image (optional)</label>
        <input type="file" class="form-control" id="profile_image" name="profile_image" accept="image/*">
        <% if (user.profile_image) { %>
          <small>Current: <img src="<%= user.profile_image %>" alt="Current avatar" style="width:80px; height:80px; border-radius:50%; margin-top:0.5rem;"></small>
        <% } %>
      </div>

      <button type="submit" class="btn btn-primary">Save Changes</button>
      <a href="/profile" class="btn btn-secondary">Cancel</a>
    </form>
  </div>

  <%- include('partials/footer') %>
</body>
</html>
